import { PublicKey } from "@solana/web3.js";
import { Buffer } from "buffer";
import { assert, assertHasOwn, assertInstanceOf } from "./assert";
import { expect, test } from "bun:test";
test("assert", () => {
    expect(() => assert(true, "..")).not.toThrow();
    expect(() => assert(false, "bing bong")).toThrowError(/bing bong/);
    expect(() => assertHasOwn({ a: 1 }, "a")).not.toThrow();
    expect(() => assertHasOwn({ a: 1 }, "myFieldName")).toThrowError(/myFieldName/);
    expect(() => assertInstanceOf(Uint8Array.from([1, 2, 3]), Uint8Array)).not.toThrow();
    expect(() => assertInstanceOf(Buffer.from([1, 2, 3]), Uint8Array)).not.toThrow();
    expect(() => assertInstanceOf(new PublicKey("BPFLoaderUpgradeab1e11111111111111111111111"), PublicKey)).not.toThrow();
    expect(() => assertInstanceOf(new PublicKey("BPFLoaderUpgradeab1e11111111111111111111111"), Object)).not.toThrow();
    expect(() => assertInstanceOf(new PublicKey("BPFLoaderUpgradeab1e11111111111111111111111"), Number)).toThrowError();
    expect(() => assertInstanceOf(new PublicKey("BPFLoaderUpgradeab1e11111111111111111111111"), Uint8Array)).toThrowError();
});
